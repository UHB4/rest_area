{"ast":null,"code":"var _jsxFileName = \"C:\\\\UHB\\\\rest_area\\\\src\\\\kako_map\\\\my_location.js\",\n  _s = $RefreshSig$();\nimport { Map, MapMarker, CustomOverlayMap } from \"react-kakao-maps-sdk\";\nimport { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport React from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction My_Location() {\n  _s();\n  const [state, setState] = useState({\n    center: {\n      lat: 33.450701,\n      lng: 126.570667\n    },\n    locations: [],\n    // 충전소 위치 데이터\n    errMsg: null,\n    isLoading: true\n  });\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const newPos = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n        setState(prev => ({\n          ...prev,\n          center: newPos,\n          isLoading: false\n        }));\n        fetchStations(newPos.lat, newPos.lng); // 위치 기반으로 주변 충전소 정보 요청\n      }, err => {\n        setState(prev => ({\n          ...prev,\n          errMsg: err.message,\n          isLoading: false\n        }));\n      });\n    } else {\n      setState(prev => ({\n        ...prev,\n        errMsg: \"Geolocation을 사용할 수 없어요..\",\n        isLoading: false\n      }));\n    }\n  }, []);\n  const fetchStations = (latitude, longitude) => {\n    console.log('Sending request to server:', {\n      latitude,\n      longitude\n    });\n    axios.post('http://localhost:5000/find-stations', {\n      latitude,\n      longitude\n    }).then(response => {\n      // 예를 들어, 서버 응답이 { data: { locations: [...] } } 구조인 경우\n      setState(prev => ({\n        ...prev,\n        locations: response.data.locations || [] // locations가 없을 경우 빈 배열로 설정\n      }));\n    }).catch(error => {\n      console.error('Error fetching stations:', error);\n      setState(prev => ({\n        ...prev,\n        errMsg: '충전소 정보를 가져오는데 실패했습니다.',\n        isLoading: false\n      }));\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Map, {\n      center: state.center,\n      style: {\n        width: \"100%\",\n        height: \"400px\"\n      },\n      level: 3 // 지도의 확대 레벨\n      ,\n      children: [!state.isLoading && /*#__PURE__*/_jsxDEV(MapMarker, {\n        position: state.center,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: \"5px\",\n            color: \"#000\"\n          },\n          children: state.errMsg ? state.errMsg : \"현재 위치\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this), state.locations.map((loc, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: /*#__PURE__*/_jsxDEV(MapMarker, {\n          position: {\n            lat: loc.lat,\n            lng: loc.lng\n          },\n          image: {\n            src: \"/images/eleccharger.png\",\n            // 마커 이미지\n            size: {\n              width: 50,\n              height: 30\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(CustomOverlayMap, {\n            position: {\n              lat: loc.lat,\n              lng: loc.lng\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: \"5px\",\n                background: \"#fff\",\n                border: \"1px solid black\",\n                borderRadius: \"4px\",\n                fontSize: \"12px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: loc.statNm\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 66\n              }, this), loc.addr, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 47\n              }, this), \"Distance: \", loc.distance.toFixed(2), \" km\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(My_Location, \"/1KUjtilVS90QvsF6vdwIbPg6eA=\");\n_c = My_Location;\nexport default My_Location;\nvar _c;\n$RefreshReg$(_c, \"My_Location\");","map":{"version":3,"names":["Map","MapMarker","CustomOverlayMap","useEffect","useState","axios","React","jsxDEV","_jsxDEV","Fragment","_Fragment","My_Location","_s","state","setState","center","lat","lng","locations","errMsg","isLoading","navigator","geolocation","getCurrentPosition","position","newPos","coords","latitude","longitude","prev","fetchStations","err","message","console","log","post","then","response","data","catch","error","children","style","width","height","level","padding","color","fileName","_jsxFileName","lineNumber","columnNumber","map","loc","index","image","src","size","background","border","borderRadius","fontSize","statNm","addr","distance","toFixed","_c","$RefreshReg$"],"sources":["C:/UHB/rest_area/src/kako_map/my_location.js"],"sourcesContent":["import { Map, MapMarker, CustomOverlayMap } from \"react-kakao-maps-sdk\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from 'axios';\r\nimport React from 'react';\r\n\r\n\r\nfunction My_Location() {\r\n    const [state, setState] = useState({\r\n        center: {\r\n            lat: 33.450701,\r\n            lng: 126.570667,\r\n        },\r\n        locations: [],  // 충전소 위치 데이터\r\n        errMsg: null,\r\n        isLoading: true,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(\r\n                (position) => {\r\n                    const newPos = {\r\n                        lat: position.coords.latitude,\r\n                        lng: position.coords.longitude,\r\n                    };\r\n                    setState(prev => ({\r\n                        ...prev,\r\n                        center: newPos,\r\n                        isLoading: false,\r\n                    }));\r\n                    fetchStations(newPos.lat, newPos.lng);  // 위치 기반으로 주변 충전소 정보 요청\r\n                },\r\n                (err) => {\r\n                    setState(prev => ({\r\n                        ...prev,\r\n                        errMsg: err.message,\r\n                        isLoading: false,\r\n                    }));\r\n                }\r\n            );\r\n        } else {\r\n            setState(prev => ({\r\n                ...prev,\r\n                errMsg: \"Geolocation을 사용할 수 없어요..\",\r\n                isLoading: false,\r\n            }));\r\n        }\r\n    }, []);\r\n\r\n    const fetchStations = (latitude, longitude) => {\r\n        console.log('Sending request to server:', { latitude, longitude });\r\n        axios.post('http://localhost:5000/find-stations', { latitude, longitude })\r\n            .then((response) => {\r\n                // 예를 들어, 서버 응답이 { data: { locations: [...] } } 구조인 경우\r\n                setState(prev => ({\r\n                    ...prev,\r\n                    locations: response.data.locations || [],  // locations가 없을 경우 빈 배열로 설정\r\n                }));\r\n            })\r\n\r\n            .catch((error) => {\r\n                console.error('Error fetching stations:', error);\r\n                setState(prev => ({\r\n                    ...prev,\r\n                    errMsg: '충전소 정보를 가져오는데 실패했습니다.',\r\n                    isLoading: false,\r\n                }));\r\n            });\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <Map\r\n                center={state.center}\r\n                style={{ width: \"100%\", height: \"400px\" }}\r\n                level={3} // 지도의 확대 레벨\r\n            >\r\n                {!state.isLoading && (\r\n                    <MapMarker position={state.center}>\r\n                        <div style={{ padding: \"5px\", color: \"#000\" }}>\r\n                            {state.errMsg ? state.errMsg : \"현재 위치\"}\r\n                        </div>\r\n                    </MapMarker>\r\n                )}\r\n                {state.locations.map((loc, index) => (\r\n                    <React.Fragment key={index}>\r\n                        <MapMarker\r\n                            position={{ lat: loc.lat, lng: loc.lng }}\r\n                            image={{\r\n                                src: \"/images/eleccharger.png\", // 마커 이미지\r\n                                size: { width: 50, height: 30 },\r\n                            }}\r\n                        >\r\n                            <CustomOverlayMap position={{ lat: loc.lat, lng: loc.lng }}>\r\n                                <div style={{ padding: \"5px\", background: \"#fff\", border: \"1px solid black\", borderRadius: \"4px\", fontSize: \"12px\" }}>\r\n                                    <strong>{loc.statNm}</strong><br />\r\n                                    {loc.addr}<br />\r\n                                    Distance: {loc.distance.toFixed(2)} km\r\n                                </div>\r\n                            </CustomOverlayMap>\r\n                        </MapMarker>\r\n                    </React.Fragment>\r\n                ))}\r\n            </Map>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default My_Location;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}