{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import styles from'./create.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CreatePost(props){const[title,setTitle]=useState('');const[content,setContent]=useState('');const[userRealName,setUserRealName]=useState('');const navigate=useNavigate();// useNavigate 훅 사용\nuseEffect(()=>{axios.get('http://localhost:3001/session',{withCredentials:true}).then(response=>{if(response.data.loggedIn){setUserRealName(response.data.userRealName);}else{// window.location.href = '/login';\nconsole.log('몬가 잘안되는상황임');}}).catch(error=>{console.error('세션 정보를 가져오는 중 오류 발생:',error);});},[]);const handleSubmit=e=>{e.preventDefault();axios.post('/create',{title:title,content:content},{withCredentials:true}).then(response=>{// .then( ()=> {\nconsole.log('전송버튼이 잘눌리나?'+response.data);// 데이터 전송 성공 후에는 `/boardMain` 페이지로 이동\n// window.location.href = '/'; // 혹은 원하시는 페이지 주소로 변경\nnavigate('/board');}).catch(error=>{console.error('Error:',error);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'10px',right:'10px'},children:userRealName?/*#__PURE__*/_jsxs(\"p\",{children:[userRealName,\"\\uB2D8 \\uD658\\uC601\\uD569\\uB2C8\\uB2E4. \\xA0\\xA0\",/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"button\",children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]}):/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"button\",children:\"\\uB85C\\uADF8\\uC778\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"\\uC81C\\uBAA9:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:title,onChange:e=>setTitle(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"\\uB0B4\\uC6A9:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",name:\"content\",rows:\"24\",cols:\"50\",value:content,onChange:e=>setContent(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"\\uC791\\uC131\\uD558\\uAE30\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/board\",children:\"\\uC774\\uC804 \\uD398\\uC774\\uC9C0\\uB85C \\uB3CC\\uC544\\uAC00\\uAE30\"})]});}export default CreatePost;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","useNavigate","styles","jsx","_jsx","jsxs","_jsxs","CreatePost","props","title","setTitle","content","setContent","userRealName","setUserRealName","navigate","get","withCredentials","then","response","data","loggedIn","console","log","catch","error","handleSubmit","e","preventDefault","post","children","style","position","top","right","href","className","onSubmit","encType","htmlFor","type","id","name","value","onChange","target","rows","cols","to"],"sources":["C:/UHB/rest_area/src/board/Create.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link, useNavigate   } from 'react-router-dom';\r\nimport styles from'./create.module.css'\r\n\r\n\r\nfunction CreatePost(props) {\r\n    const [title, setTitle] = useState('');\r\n    const [content, setContent] = useState('');\r\n    const [userRealName, setUserRealName] = useState('');\r\n\r\n    const navigate = useNavigate(); // useNavigate 훅 사용\r\n\r\n\r\n    useEffect(() => {\r\n        axios.get('http://localhost:3001/session', { withCredentials: true })\r\n            .then(response => {\r\n                if (response.data.loggedIn) {\r\n                    setUserRealName(response.data.userRealName);\r\n                } else {\r\n                    // window.location.href = '/login';\r\n                    console.log('몬가 잘안되는상황임')\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('세션 정보를 가져오는 중 오류 발생:', error);\r\n            });\r\n    }, []);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        axios.post('/create', {\r\n            title: title,\r\n            content: content\r\n        },{ withCredentials: true })\r\n            .then(response => {\r\n            // .then( ()=> {\r\n                console.log('전송버튼이 잘눌리나?' + response.data);\r\n                // 데이터 전송 성공 후에는 `/boardMain` 페이지로 이동\r\n                // window.location.href = '/'; // 혹은 원하시는 페이지 주소로 변경\r\n                navigate('/board');\r\n\r\n            })\r\n            .catch(error => {\r\n                console.error('Error:', error);\r\n            });\r\n    };\r\n\r\n    return (\r\n\r\n        <div>\r\n            <div style={{ position: 'absolute', top: '10px', right: '10px' }}>\r\n                {userRealName ? (\r\n                    <p>\r\n                        {userRealName}님 환영합니다. &nbsp;&nbsp;\r\n                        <a href=\"/\" className=\"button\">로그아웃</a>\r\n                    </p>\r\n                ) : (\r\n                    <a href=\"/login\" className=\"button\">로그인</a>\r\n                )}\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n                <label htmlFor=\"title\">제목:</label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"title\"\r\n                    name=\"title\"\r\n                    value={title}\r\n                    onChange={e => setTitle(e.target.value)}\r\n                /><br/>\r\n\r\n                <label htmlFor=\"content\">내용:</label><br/>\r\n                <textarea\r\n                    id=\"content\"\r\n                    name=\"content\"\r\n                    rows=\"24\"\r\n                    cols=\"50\"\r\n                    value={content}\r\n                    onChange={e => setContent(e.target.value)}\r\n                /><br/>\r\n\r\n                <input type=\"submit\" value=\"작성하기\"/>\r\n            </form>\r\n\r\n            <Link to=\"/board\">이전 페이지로 돌아가기</Link>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default CreatePost;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,CAAEC,WAAW,KAAU,kBAAkB,CACtD,MAAO,CAAAC,MAAM,KAAK,qBAAqB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGvC,QAAS,CAAAC,UAAUA,CAACC,KAAK,CAAE,CACvB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACgB,YAAY,CAAEC,eAAe,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAEpD,KAAM,CAAAkB,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAAE;AAGhCH,SAAS,CAAC,IAAM,CACZC,KAAK,CAACiB,GAAG,CAAC,+BAA+B,CAAE,CAAEC,eAAe,CAAE,IAAK,CAAC,CAAC,CAChEC,IAAI,CAACC,QAAQ,EAAI,CACd,GAAIA,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAAE,CACxBP,eAAe,CAACK,QAAQ,CAACC,IAAI,CAACP,YAAY,CAAC,CAC/C,CAAC,IAAM,CACH;AACAS,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC,CAC7B,CACJ,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAI,CACZH,OAAO,CAACG,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAChD,CAAC,CAAC,CACV,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,YAAY,CAAIC,CAAC,EAAK,CACxBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB7B,KAAK,CAAC8B,IAAI,CAAC,SAAS,CAAE,CAClBpB,KAAK,CAAEA,KAAK,CACZE,OAAO,CAAEA,OACb,CAAC,CAAC,CAAEM,eAAe,CAAE,IAAK,CAAC,CAAC,CACvBC,IAAI,CAACC,QAAQ,EAAI,CAClB;AACIG,OAAO,CAACC,GAAG,CAAC,aAAa,CAAGJ,QAAQ,CAACC,IAAI,CAAC,CAC1C;AACA;AACAL,QAAQ,CAAC,QAAQ,CAAC,CAEtB,CAAC,CAAC,CACDS,KAAK,CAACC,KAAK,EAAI,CACZH,OAAO,CAACG,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAClC,CAAC,CAAC,CACV,CAAC,CAED,mBAEInB,KAAA,QAAAwB,QAAA,eACI1B,IAAA,QAAK2B,KAAK,CAAE,CAAEC,QAAQ,CAAE,UAAU,CAAEC,GAAG,CAAE,MAAM,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAJ,QAAA,CAC5DjB,YAAY,cACTP,KAAA,MAAAwB,QAAA,EACKjB,YAAY,CAAC,iDACd,cAAAT,IAAA,MAAG+B,IAAI,CAAC,GAAG,CAACC,SAAS,CAAC,QAAQ,CAAAN,QAAA,CAAC,0BAAI,CAAG,CAAC,EACxC,CAAC,cAEJ1B,IAAA,MAAG+B,IAAI,CAAC,QAAQ,CAACC,SAAS,CAAC,QAAQ,CAAAN,QAAA,CAAC,oBAAG,CAAG,CAC7C,CACA,CAAC,cAENxB,KAAA,SAAM+B,QAAQ,CAAEX,YAAa,CAACY,OAAO,CAAC,qBAAqB,CAAAR,QAAA,eACvD1B,IAAA,UAAOmC,OAAO,CAAC,OAAO,CAAAT,QAAA,CAAC,eAAG,CAAO,CAAC,cAClC1B,IAAA,UACIoC,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,OAAO,CACVC,IAAI,CAAC,OAAO,CACZC,KAAK,CAAElC,KAAM,CACbmC,QAAQ,CAAEjB,CAAC,EAAIjB,QAAQ,CAACiB,CAAC,CAACkB,MAAM,CAACF,KAAK,CAAE,CAC3C,CAAC,cAAAvC,IAAA,QAAI,CAAC,cAEPA,IAAA,UAAOmC,OAAO,CAAC,SAAS,CAAAT,QAAA,CAAC,eAAG,CAAO,CAAC,cAAA1B,IAAA,QAAI,CAAC,cACzCA,IAAA,aACIqC,EAAE,CAAC,SAAS,CACZC,IAAI,CAAC,SAAS,CACdI,IAAI,CAAC,IAAI,CACTC,IAAI,CAAC,IAAI,CACTJ,KAAK,CAAEhC,OAAQ,CACfiC,QAAQ,CAAEjB,CAAC,EAAIf,UAAU,CAACe,CAAC,CAACkB,MAAM,CAACF,KAAK,CAAE,CAC7C,CAAC,cAAAvC,IAAA,QAAI,CAAC,cAEPA,IAAA,UAAOoC,IAAI,CAAC,QAAQ,CAACG,KAAK,CAAC,0BAAM,CAAC,CAAC,EACjC,CAAC,cAEPvC,IAAA,CAACJ,IAAI,EAACgD,EAAE,CAAC,QAAQ,CAAAlB,QAAA,CAAC,gEAAY,CAAM,CAAC,EACpC,CAAC,CAGd,CAEA,cAAe,CAAAvB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}