{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Chart as ChartJS,LinearScale,CategoryScale,BarElement,PointElement,LineElement,Legend,Tooltip,LineController,BarController}from'chart.js';import{Bar}from'react-chartjs-2';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";function ChartLine(){ChartJS.register(LinearScale,CategoryScale,BarElement,PointElement,LineElement,Legend,Tooltip,LineController,BarController);const[oilData,setOilData]=useState({});useEffect(()=>{axios.get('http://127.0.0.1:5000/api/avgRecentPrice').then(response=>{setOilData(response.data);}).catch(error=>{console.error('Error fetching data: ',error);});},[]);const formatChartData=oilData=>{if(!oilData||Object.keys(oilData).length===0){return{labels:[],datasets:[]};}const oilNames={'B034':'고급휘발유','B027':'보통휘발유','D047':'자동차경유','C004':'실내등유'// 'K015': '자동차부탄',\n};const excludedOilTypes=['K015'];// 자동차부탄 제외\nconst formatDate=dateString=>{// const year = dateString.slice(0, 4);\nconst month=dateString.slice(4,6);const day=dateString.slice(6,8);return\"\".concat(month,\"/\").concat(day);};const labels=oilData['B027'].map(item=>formatDate(item.date));const datasets=Object.keys(oilData).filter(oilType=>!excludedOilTypes.includes(oilType)).map((label,index)=>{const data=oilData[label].map(item=>item.price);return{type:'line',label:oilNames[label],borderColor:'rgb(255,176,176)',data:data,fill:false,hidden:index!==0};});return{labels:labels,datasets:datasets};};const chartData=formatChartData(oilData);const legendTitle={display:true,text:'7일간 유가 변동',padding:20,font:{size:16,weight:'bold'}};const options={plugins:{legend:{title:legendTitle}},scales:{'y':{beginAtZero:false,display:true,position:'left',min:Math.min(...chartData.datasets.map(dataset=>dataset.minValue)),max:Math.max(...(chartData.datasets.map(dataset=>dataset.maxValue)+50)),ticks:{min:Math.min(...chartData.datasets.map(dataset=>dataset.minValue)),max:Math.max(...chartData.datasets.map(dataset=>dataset.maxValue))+50,stepSize:1,callback:function(value){return value+'원';}}}}};return/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',maxWidth:'400px',margin:'auto'},children:/*#__PURE__*/_jsx(Bar,{data:chartData,id:\"myChart\",options:options,width:400,height:460})});}export default ChartLine;","map":{"version":3,"names":["React","useEffect","useState","Chart","ChartJS","LinearScale","CategoryScale","BarElement","PointElement","LineElement","Legend","Tooltip","LineController","BarController","Bar","axios","jsx","_jsx","ChartLine","register","oilData","setOilData","get","then","response","data","catch","error","console","formatChartData","Object","keys","length","labels","datasets","oilNames","excludedOilTypes","formatDate","dateString","month","slice","day","concat","map","item","date","filter","oilType","includes","label","index","price","type","borderColor","fill","hidden","chartData","legendTitle","display","text","padding","font","size","weight","options","plugins","legend","title","scales","beginAtZero","position","min","Math","dataset","minValue","max","maxValue","ticks","stepSize","callback","value","style","width","maxWidth","margin","children","id","height"],"sources":["C:/UHB/rest_area/src/routes/Chart/Chart7.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {\r\n    Chart as ChartJS,\r\n    LinearScale,\r\n    CategoryScale,\r\n    BarElement,\r\n    PointElement,\r\n    LineElement,\r\n    Legend,\r\n    Tooltip,\r\n    LineController,\r\n    BarController,\r\n} from 'chart.js';\r\nimport {Bar} from 'react-chartjs-2';\r\nimport axios from \"axios\";\r\n\r\nfunction ChartLine() {\r\n    ChartJS.register(\r\n        LinearScale,\r\n        CategoryScale,\r\n        BarElement,\r\n        PointElement,\r\n        LineElement,\r\n        Legend,\r\n        Tooltip,\r\n        LineController,\r\n        BarController\r\n\r\n    );\r\n\r\n    const [oilData, setOilData] = useState({});\r\n\r\n    useEffect(() => {\r\n        axios.get('http://127.0.0.1:5000/api/avgRecentPrice')\r\n            .then(response => {\r\n                setOilData(response.data);\r\n            })\r\n            .catch(error => {\r\n                console.error('Error fetching data: ', error);\r\n            });\r\n    }, []);\r\n\r\n    const formatChartData = (oilData) => {\r\n\r\n        if (!oilData || Object.keys(oilData).length === 0) {\r\n            return {\r\n                labels: [],\r\n                datasets: [],\r\n            };\r\n        }\r\n        const oilNames = {\r\n            'B034': '고급휘발유',\r\n            'B027': '보통휘발유',\r\n            'D047': '자동차경유',\r\n            'C004': '실내등유',\r\n            // 'K015': '자동차부탄',\r\n        };\r\n        const excludedOilTypes = ['K015']; // 자동차부탄 제외\r\n        const formatDate = (dateString) => {\r\n            // const year = dateString.slice(0, 4);\r\n            const month = dateString.slice(4, 6);\r\n            const day = dateString.slice(6, 8);\r\n            return `${month}/${day}`;\r\n        };\r\n        const labels = oilData['B027'].map(item => formatDate(item.date));\r\n\r\n        const datasets = Object.keys(oilData)\r\n            .filter(oilType => !excludedOilTypes.includes(oilType))\r\n            .map((label,index) => {\r\n                const data = oilData[label].map(item => item.price);\r\n                return {\r\n                    type: 'line',\r\n                    label: oilNames[label],\r\n                    borderColor: 'rgb(255,176,176)',\r\n                    data: data,\r\n                    fill: false,\r\n                    hidden: index !== 0,\r\n\r\n                };\r\n            });\r\n\r\n        return {\r\n            labels: labels,\r\n            datasets: datasets,\r\n        };\r\n    };\r\n    const chartData = formatChartData(oilData);\r\n\r\n    const legendTitle = {\r\n        display: true,\r\n        text: '7일간 유가 변동',\r\n        padding: 20,\r\n        font: {\r\n            size: 16,\r\n            weight: 'bold',\r\n        }\r\n    };\r\n\r\n\r\n    const options = {\r\n\r\n        plugins: {\r\n            legend: {\r\n                title: legendTitle,\r\n            }\r\n        },\r\n        scales: {\r\n            'y': {\r\n                beginAtZero: false,\r\n                display: true,\r\n                position: 'left',\r\n                min: Math.min(...chartData.datasets.map(dataset => dataset.minValue)),\r\n                max: Math.max(...chartData.datasets.map(dataset => dataset.maxValue)+50),\r\n                ticks: {\r\n                    min: Math.min(...chartData.datasets.map(dataset => dataset.minValue)),\r\n                    max: Math.max(...chartData.datasets.map(dataset => dataset.maxValue)) + 50,\r\n                    stepSize: 1,\r\n                    callback: function (value) {\r\n                        return value + '원';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n\r\n        <div style={{width: '100%', maxWidth: '400px', margin: 'auto'}}>\r\n\r\n            <Bar data={chartData} id=\"myChart\" options={options} width={400} height={460}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChartLine;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}