{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Map,MapMarker}from\"react-kakao-maps-sdk\";import Modal from'../Modal/Modal';import styles from'./restAreaDetail.module.css';import RestAreaModalContent from'../kako_map/RestAreaModalContent';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RestAreaDetail(_ref){let{selectedRoute}=_ref;const[position,setPosition]=useState({lat:36.5,lng:127.5});const[zoomLevel,setZoomLevel]=useState(12);const[restAreas,setRestAreas]=useState([]);const[modalOpen,setModalOpen]=useState(false);const[selectedRestArea,setSelectedRestArea]=useState(null);const[isOpen,setIsOpen]=useState(false);// Hover\nuseEffect(()=>{if(selectedRoute){axios.get(\"http://13.125.136.48:5000/restareas?route=\".concat(selectedRoute)).then(response=>{setRestAreas(response.data);if(response.data.length>0){const firstArea=response.data[0];setPosition({lat:firstArea.위도,lng:firstArea.경도});}}).catch(error=>console.error('Error fetching data: ',error));setZoomLevel(12);// Zoom level\n}},[selectedRoute]);const normalizeName=name=>{return name.replace(/휴게소|주유소|정류장|터미널/g,'').trim();};const handleMarkerClick=area=>{const normalizedAreaName=normalizeName(area.휴게소명);Promise.all([axios.get(\"http://13.125.136.48:5000/restbrands?routeNm=\".concat(selectedRoute)),axios.get(\"http://13.125.136.48:5000/fuelprices?routeNm=\".concat(selectedRoute)),axios.get(\"http://13.125.136.48:5000/facilities?routeNm=\".concat(selectedRoute)),axios.get(\"http://13.125.136.48:5000/bestfoods?routeNm=\".concat(selectedRoute))]).then(_ref2=>{let[brandResponse,fuelResponse,facilityResponse,bestFoodResponse]=_ref2;const brandData=brandResponse.data.list;const fuelData=fuelResponse.data.list;const facilityData=facilityResponse.data;const bestFoodData=bestFoodResponse.data.list;const facility=facilityData.list.find(f=>normalizeName(f.serviceAreaName)===normalizedAreaName);const brand=brandData.find(b=>normalizeName(b.stdRestNm)===normalizedAreaName);const fuel=fuelData.find(f=>normalizeName(f.serviceAreaName)===normalizedAreaName);const bestFoods=bestFoodData.filter(f=>normalizeName(f.stdRestNm)===normalizedAreaName);const updatedArea={...area,convenience:facility?facility.convenience:'정보 없음',brandInfo:brand?{brdName:brand.brdName,stime:brand.stime,etime:brand.etime,brdDesc:brand.brdDesc,lsttmAltrDttm:brand.lsttmAltrDttm}:null,fuelPrices:fuel?{diselPrice:fuel.diselPrice.replace('원',''),gasolinePrice:fuel.gasolinePrice.replace('원',''),lpgPrice:fuel.lpgPrice.replace('원',''),telNo:fuel.telNo}:null,bestFoods:bestFoods.map(food=>({foodNm:food.foodNm,foodCost:food.foodCost,lsttmAltrDttm:food.lsttmAltrDttm}))};setSelectedRestArea(updatedArea);setModalOpen(true);}).catch(error=>{console.error('Error fetching data: ',error);});};return/*#__PURE__*/_jsxs(\"div\",{className:styles.mapWrapper,children:[/*#__PURE__*/_jsx(Map,{center:position,level:zoomLevel,style:{width:\"100%\",height:\"700px\"},children:restAreas.map((area,index)=>/*#__PURE__*/_jsx(MapMarker,{position:{lat:area.위도,lng:area.경도},onClick:()=>handleMarkerClick(area),onMouseOver:()=>setIsOpen(area),onMouseOut:()=>setIsOpen(null),image:{src:\"https://images.emojiterra.com/google/noto-emoji/unicode-15.1/color/512px/1f53b.png\",size:{width:30,height:35}},children:isOpen===area&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:17,color:'#000000',backgroundColor:'#fffefe',padding:'5px',borderRadius:'5px',textAlign:'center'},children:area.휴게소명})},index))}),selectedRestArea&&/*#__PURE__*/_jsx(Modal,{isOpen:modalOpen,onClose:()=>setModalOpen(false),children:/*#__PURE__*/_jsx(RestAreaModalContent,{area:selectedRestArea})})]});}export default RestAreaDetail;","map":{"version":3,"names":["React","useState","useEffect","axios","Map","MapMarker","Modal","styles","RestAreaModalContent","jsx","_jsx","jsxs","_jsxs","RestAreaDetail","_ref","selectedRoute","position","setPosition","lat","lng","zoomLevel","setZoomLevel","restAreas","setRestAreas","modalOpen","setModalOpen","selectedRestArea","setSelectedRestArea","isOpen","setIsOpen","get","concat","then","response","data","length","firstArea","위도","경도","catch","error","console","normalizeName","name","replace","trim","handleMarkerClick","area","normalizedAreaName","휴게소명","Promise","all","_ref2","brandResponse","fuelResponse","facilityResponse","bestFoodResponse","brandData","list","fuelData","facilityData","bestFoodData","facility","find","f","serviceAreaName","brand","b","stdRestNm","fuel","bestFoods","filter","updatedArea","convenience","brandInfo","brdName","stime","etime","brdDesc","lsttmAltrDttm","fuelPrices","diselPrice","gasolinePrice","lpgPrice","telNo","map","food","foodNm","foodCost","className","mapWrapper","children","center","level","style","width","height","index","onClick","onMouseOver","onMouseOut","image","src","size","fontSize","color","backgroundColor","padding","borderRadius","textAlign","onClose"],"sources":["C:/UHB/rest_area/src/kako_map/restAreaDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Map, MapMarker } from \"react-kakao-maps-sdk\";\r\nimport Modal from '../Modal/Modal';\r\nimport styles from './restAreaDetail.module.css';\r\nimport RestAreaModalContent from '../kako_map/RestAreaModalContent';\r\n\r\nfunction RestAreaDetail({ selectedRoute }) {\r\n    const [position, setPosition] = useState({lat: 36.5, lng: 127.5});\r\n    const [zoomLevel, setZoomLevel] = useState(12);\r\n    const [restAreas, setRestAreas] = useState([]);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [selectedRestArea, setSelectedRestArea] = useState(null);\r\n    const [isOpen, setIsOpen] = useState(false); // Hover\r\n\r\n    useEffect(() => {\r\n        if (selectedRoute) {\r\n            axios.get(`http://13.125.136.48:5000/restareas?route=${selectedRoute}`)\r\n                .then(response => {\r\n                    setRestAreas(response.data);\r\n                    if (response.data.length > 0) {\r\n                        const firstArea = response.data[0];\r\n                        setPosition({lat: firstArea.위도, lng: firstArea.경도});\r\n                    }\r\n                })\r\n                .catch(error => console.error('Error fetching data: ', error));\r\n            setZoomLevel(12); // Zoom level\r\n        }\r\n    }, [selectedRoute]);\r\n\r\n    const normalizeName = (name) => {\r\n        return name.replace(/휴게소|주유소|정류장|터미널/g, '').trim();\r\n    };\r\n\r\n    const handleMarkerClick = (area) => {\r\n        const normalizedAreaName = normalizeName(area.휴게소명);\r\n\r\n        Promise.all([\r\n            axios.get(`http://13.125.136.48:5000/restbrands?routeNm=${selectedRoute}`),\r\n            axios.get(`http://13.125.136.48:5000/fuelprices?routeNm=${selectedRoute}`),\r\n            axios.get(`http://13.125.136.48:5000/facilities?routeNm=${selectedRoute}`),\r\n            axios.get(`http://13.125.136.48:5000/bestfoods?routeNm=${selectedRoute}`)\r\n        ]).then(([brandResponse, fuelResponse, facilityResponse, bestFoodResponse]) => {\r\n            const brandData = brandResponse.data.list;\r\n            const fuelData = fuelResponse.data.list;\r\n            const facilityData = facilityResponse.data;\r\n            const bestFoodData = bestFoodResponse.data.list;\r\n\r\n            const facility = facilityData.list.find(f => normalizeName(f.serviceAreaName) === normalizedAreaName);\r\n            const brand = brandData.find(b => normalizeName(b.stdRestNm) === normalizedAreaName);\r\n            const fuel = fuelData.find(f => normalizeName(f.serviceAreaName) === normalizedAreaName);\r\n            const bestFoods = bestFoodData.filter(f => normalizeName(f.stdRestNm) === normalizedAreaName);\r\n\r\n            const updatedArea = {\r\n                ...area,\r\n                convenience: facility ? facility.convenience : '정보 없음',\r\n                brandInfo: brand ? {\r\n                    brdName: brand.brdName,\r\n                    stime: brand.stime,\r\n                    etime: brand.etime,\r\n                    brdDesc: brand.brdDesc,\r\n                    lsttmAltrDttm: brand.lsttmAltrDttm\r\n                } : null,\r\n                fuelPrices: fuel ? {\r\n                    diselPrice: fuel.diselPrice.replace('원', ''),\r\n                    gasolinePrice: fuel.gasolinePrice.replace('원', ''),\r\n                    lpgPrice: fuel.lpgPrice.replace('원', ''),\r\n                    telNo: fuel.telNo\r\n                } : null,\r\n                bestFoods: bestFoods.map(food => ({\r\n                    foodNm: food.foodNm,\r\n                    foodCost: food.foodCost,\r\n                    lsttmAltrDttm: food.lsttmAltrDttm\r\n                }))\r\n            };\r\n\r\n            setSelectedRestArea(updatedArea);\r\n            setModalOpen(true);\r\n        }).catch(error => {\r\n            console.error('Error fetching data: ', error);\r\n        });\r\n    };\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className={styles.mapWrapper}>\r\n            <Map center={position} level={zoomLevel} style={{width: \"100%\", height: \"700px\"}}>\r\n\r\n\r\n\r\n                {restAreas.map((area, index) => (\r\n                    <MapMarker\r\n                        key={index}\r\n                        position={{lat: area.위도, lng: area.경도}}\r\n                        onClick={() => handleMarkerClick(area)}\r\n                        onMouseOver={() => setIsOpen(area)}\r\n                        onMouseOut={() => setIsOpen(null)}\r\n                        image={{\r\n                            src: \"https://images.emojiterra.com/google/noto-emoji/unicode-15.1/color/512px/1f53b.png\",\r\n                            size: {\r\n                                width: 30,\r\n                                height: 35,\r\n                            },\r\n                        }}\r\n                    >\r\n                        {isOpen === area && (\r\n                            <div style={{\r\n                                fontSize: 17,\r\n                                color: '#000000',\r\n                                backgroundColor: '#fffefe',\r\n                                padding: '5px',\r\n                                borderRadius: '5px',\r\n                                textAlign: 'center'\r\n                            }}>\r\n                                {area.휴게소명}\r\n                            </div>\r\n                        )}\r\n                    </MapMarker>\r\n                ))}\r\n            </Map>\r\n            {\r\n                selectedRestArea && (\r\n                    <Modal isOpen={modalOpen} onClose={() => setModalOpen(false)}>\r\n                        <RestAreaModalContent area={selectedRestArea}/>\r\n                    </Modal>\r\n                )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RestAreaDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}